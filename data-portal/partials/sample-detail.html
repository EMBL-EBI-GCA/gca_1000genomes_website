<div es-doc="sample" error-as="apiError" es-type="sample" es-id="SampleCtrl.name" on-success="SampleCtrl.setFileSelection()">
  <h1>Sample {{SampleCtrl.name}}</h1>
  <p ng-if="apiError">{{apiError.status}}: {{apiError.statusText}}</p>
  <div ng-show="sample">

  <div class="col-lg-6"><div class="panel panel-default">
  <div class="panel-heading"><h3 class="panel-title">{{SampleCtrl.name}} details</h3></div>
  <div class="panel-body">
      <dl class="dl-horizontal">
      <div ng-if="sample.sex"><dt>Sex:</dt><dd>{{sample.sex | ucFirst}}</dd></div>
      <div ng-if="sample.biosampleId"><dt>Biosample ID:</dt><dd><a ng-href="http://www.ebi.ac.uk/biosamples/sample/{{sample.biosampleId}}" target="_blank">{{sample.biosampleId}}</a></dd></div>
      <dt>Search Coriell:</dt><dd><a ng-href="https://catalog.coriell.org/0/Sections/Search/Sample_Detail.aspx?Ref={{SampleCtrl.name}}&Product=CC" target="_blank">{{SampleCtrl.name}}</a></dd>
      </dl>
  </div>
  </div></div>

  <div ng-if="sample.population" class="col-lg-6"><div class="panel panel-default">
  <div class="panel-heading"><h3 class="panel-title">{{sample.population.code}} population</h3></div>
  <div class="panel-body">
      <dl class="dl-horizontal">
      <dt>Population:</dt><dd>{{sample.population.name}}</dd>
      <dt>Code:</dt><dd>{{sample.population.code}}</dd>
      <dt>Description:</dt><dd>{{sample.population.description}}</dd>
      <dt>Superpopulation:</dt><dd>{{sample.superpopulation.name}}</dd>
      <dt>Superpopulation code:</dt><dd>{{sample.superpopulation.code}}</dd>
      </dl>
  </div>
  </div></div>

  <div ng-if="sample.relatedSample" class="col-lg-6"><div class="panel panel-default">
  <div class="panel-heading"><h3 class="panel-title">Related samples</h3></div>
  <div class="panel-body">
      <dl class="dl-horizontal">
      <div ng-repeat="relationship in sample.relatedSample"><dt>{{relationship.relationship}}:</dt><dd><a ng-href="sample/{{relationship.relatedSampleName}}">{{relationship.relatedSampleName}}</a></dd></div>
      </dl>
  </div>
  </div></div>

  <div ng-if="sample.dataCollections" class="col-lg-12">
  <h2>Data collections for {{SampleCtrl.name}}</h2>
  <ul class="nav nav-tabs nav-justified">
  <li ng-repeat="dc in sample.dataCollections" ng-class="{'active': dc === SampleCtrl.dataCollection ? true : false}">
        <a href="" ng-click="SampleCtrl.setDataCollection(dc)"><div ng-class="{'nav-tab-tall': sample.dataCollections.length >=4 }">{{dc.dataCollection}}</div></a>
  </li></ul>

  <div class="panel panel-default"><div class="panel-body"> <div class="row">

  <div class="col-md-6 col-lg-6 col-sm-6 col-xs-6"><div class="panel panel-default">
  <div class="panel-heading">Data types</div>
  <div class="panel-body">
  <div ng-repeat="dt in SampleCtrl.dataCollection.dataTypes" class="radio">
    <label><input type="radio" ng-model="SampleCtrl.dataType" ng-change="SampleCtrl.fileSearch({page1: true})" ng-value="dt">{{dt | ucFirst}}</label>
  </div></div>
  </div></div>

  <div class="col-md-6 col-lg-6 col-sm-6 col-xs-6"><div class="panel panel-default">
  <div class="panel-heading">{{SampleCtrl.dataType | ucFirst}} analysis groups</div>
  <div class="panel-body">
  <div ng-repeat="ag in SampleCtrl.dataCollection[SampleCtrl.dataType]" class="radio">
    <label><input type="radio" ng-model="SampleCtrl.analysisGroup" ng-change="SampleCtrl.fileSearch({page1: true})" ng-value="ag">{{ag}}</label>
  </div></div>
  </div></div>

  </div>

  <es-search search-body="SampleCtrl.fileSearchBody" hits-as="files" error-as="apiFileError" es-type="file"></es-search>
  <div class="row">
  <div class="col-md-6"><p><strong>{{files.total}}</strong> matching {{SampleCtrl.dataType}} data files</p></div>
  <div class="col-md-6"><p><a ng-href="{{SampleCtrl.dataCollection.dataReusePolicy}}"><span class="glyphicon glyphicon-paperclip" aria-hidden="true"></span> Data reuse policy for {{SampleCtrl.dataCollection.dataCollection}}</a></p></div>
  </div>

  <div class="row"><div class="col-md-12 table-group">
  <uib-pager ng-if="files.total > SampleCtrl.hitsPerPage"
            items-per-page="SampleCtrl.hitsPerPage" ng-model="SampleCtrl.filePage"
           ng-change="SampleCtrl.fileSearch()"   total-items="files.total"></uib-pager>

  <table class="table table-striped table-condensed">
  <tr><th>File</th><th>Download</th></tr>
      <tr ng-repeat="file in files.hits">
      <td ng-bind-html="file._source.url | softHyphenUrl"></td>
      <td><a ng-href="{{file._source.url}}"><span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span></a></td>
      </tr>
  </table>
  </div></div>

  </div>
  </div>
  </div>


  </div>
</div>
